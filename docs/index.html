<!DOCTYPE html>
<html class="no-js" lang="en_US">
<head>
    <title>Symfony Launchpad - Project Page and Documentation</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <meta name="google-site-verification" content="lVBDGjSjqXMMYmwo5s4M1zYByK3mfT9sdBQhpQiQ9vk" />

    <link rel="shortcut icon" href="https://www.symfony.com/favicon.ico" type="image/x-icon">

    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css">
    <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Open+Sans+Condensed:300,700|Open+Sans:400,600">

    <link rel="stylesheet" type="text/css" href="./css/sflaunchpad.css">

    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
</head>
<body>
<main class="white-background">
    <header>
        <nav class="navbar navbar-default navbar-static-top">
            <div class="container">
                <div class="navbar-header">
                    <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                </div>

                <div class="collapse navbar-collapse " id="navbar">
                    <ul class="nav navbar-nav">
                        <li><a href="#installation">Installation</a></li>
                        <li><a href="#usage">Usage</a></li>
                        <li><a href="#commands">Commands</a></li>
                        <li><a href="#deploy">Deployment</a></li>
                        <li class="dropdown">
                            <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">
                                More
                                <span class="caret"></span>
                            </a>
                            <ul class="dropdown-menu ezlp-submenu">
                                <li><a href="#mac-tips">Mac OS X - Tips</a></li>
                                <li><a href="#home">Global configurations</a></li>
                            </ul>
                        </li>
                    </ul>
                    <ul class="nav navbar-nav navbar-right">
                        <li><a href="https://symfony.com/doc/current/index.html" target="_blank">Symfony</a></li>
                        <li>
                            <a href="https://github.com/upwind-media/symfony-launchpad" target="_blank">
                                Github
                                <i class="fa fa-github" aria-hidden="true"></i>
                            </a>
                        </li>
                    </ul>
                </div>
            </div>
        </nav>
    </header>

    <div class="container">
        <h1><i class="fa fa-rocket fa-2x" aria-hidden="true"></i>Symfony Launchpad</h1>
        <p>Symfony Launchpad is a CLI tool to start and maintain a Symfony project in less than 5 minutes on top of a full Docker stack.</p>
        <p>It is based on eZ Launchpad created for eZ Platform / Ibexa installations.</p>

        <div class="alert alert-success" role="alert">
            <p>
                <i class="fa fa-code" aria-hidden="true"></i> You will end up with a full
                <strong>Docker stack</strong> where the source-code is on your host for you
                <strong>to start coding</strong> right away!
            </p>
        </div>

        <h2 id="installation"><i class="fa fa-magic" aria-hidden="true"></i> Installation</h2>
        <div>
            <p>Requirements:</p>
            <ul>
                <li>PHP and PHP-CURL extension. PHP version 7.2+</li>
                <li>Docker 1.17+</li>
                <li>Docker Compose 1.16+</li>
            </ul>

            <ul class="nav nav-tabs" role="tablist">
                <li role="presentation" class="active">
                    <a href="#installioncurl" aria-controls="installioncurl" role="tab" data-toggle="tab">curl</a>
                </li>
                <li role="presentation">
                    <a href="#installionwget" aria-controls="installionwget" role="tab" data-toggle="tab">wget</a>
                </li>
            </ul>
            <div class="tab-content">
                <div role="tabpanel" class="tab-pane active" id="installioncurl">
                    <br />
                    <p>If you have <strong>curl</strong> installed:</p>
                    <div class="highlight">
                        <button class="to-clipboard">
                            <i class="fa fa-clipboard" aria-hidden="true"></i> Copy
                        </button>
                        <pre>$ <code>curl -LSs https://upwind-media.github.io/symfony-launchpad/install.bash | bash</code></pre>
                    </div>

                </div>
                <div role="tabpanel" class="tab-pane" id="installionwget">
                    <br />
                    <p>If you have <strong>wget</strong> installed:</p>
                    <div class="highlight">
                        <button class="to-clipboard">
                            <i class="fa fa-clipboard" aria-hidden="true"></i> Copy
                        </button>
                        <pre>$ <code>wget -O - &quot;https://upwind-media.github.io/symfony-launchpad/install.bash&quot; | bash</code></pre>
                    </div>
                </div>
            </div>
        </div>
        <h2 id="usage"><i class="fa fa-keyboard-o" aria-hidden="true"></i> Usage</h2>
        <div>
            <p>When you have installed Symfony Launchpad (<em>~/sf</em>) you can start enjoying the feature.</p>
            <p>Symfony Launchpad provides 2 main features:</p>
            <ul>
                <li><strong>Initialization</strong> of a brand-new Symfony project (on top of Docker)</li>
                <li><strong>Create</strong> the Docker Stack related to the current directory.</li>
            </ul>

            <ul class="nav nav-tabs" role="tablist">
                <li role="presentation" class="active">
                    <a href="#initstack" aria-controls="initstack" role="tab" data-toggle="tab">Start from scratch</a>
                </li>
                <li role="presentation">
                    <a href="#createstack" aria-controls="createstack" role="tab" data-toggle="tab">Bootstrap an existing project</a>
                </li>
            </ul>

            <div class="tab-content">
                <div role="tabpanel" class="tab-pane active" id="initstack">
                    <h3><i class="fa fa-play" aria-hidden="true"></i> Initialization</h3>
                    <p>
                        That is the "from scratch" installation. You need to do that when you have nothing and you want to start a new project based on Symfony.
                    </p>
                    <div class="highlight">
                        <button class="to-clipboard">
                            <i class="fa fa-clipboard" aria-hidden="true"></i> Copy
                        </button>
                        <pre>$ <code>~/sf init</code></pre>
                    </div>


                    <p>From here Symfony Launchpad will ask you a bunch of question to configure your project.</p>
                    <div class="alert alert-info" role="alert">
                        <p>
                            <i class="fa fa-apple" aria-hidden="true"></i> Mac OS X users will have a wizard to set up
                            <a href='#mac-tips' class='alert-link'>NFS</a> if needed.
                        </p>
                    </div>
                    <p>At the end of the procedure those steps will be done for you:</p>
                    <ul>
                        <li>Configuration of your project locally.</li>
                        <li>Download (pull) the correct image on your Docker Daemon.</li>
                        <li>Set up a Symfony compliant <em>docker-compose.yml</em>.</li>
                        <li>Create and start the containers required (depending of the choices you made).</li>
                        <li>Install Composer in the Engine container (where PHP is executed in your stack).</li>
                        <li>Install clean Symfony project through Composer inside the stack.</li>
                    </ul>

                    <p>Once the Initialization is finished, the project is up, you can check doing:</p>
                    <div class="highlight">
                        <button class="to-clipboard">
                            <i class="fa fa-clipboard" aria-hidden="true"></i> Copy
                        </button>
                        <pre>$ <code>~/sf ps</code></pre>
                    </div>


                    <p>You are now ready to dump the database and storage, git commit and push to share the project to your teams.</p>
                    <div class="highlight">
                        <button class="to-clipboard">
                            <i class="fa fa-clipboard" aria-hidden="true"></i> Copy
                        </button>
                        <pre>$ <code>~/sf dumpdata; git init; git add .; git commit -m &quot;First Initial Commit&quot;</code></pre>
                    </div>

                    <div class="highlight">
                        <button class="to-clipboard">
                            <i class="fa fa-clipboard" aria-hidden="true"></i> Copy
                        </button>
                        <pre>$ <code>git remote add origin https://gitorigin.com/xxx/xxxx-xxx.git; git push -u origin master</code></pre>
                    </div>
                </div>
                <div role="tabpanel" class="tab-pane" id="createstack">
                    <h3>
                        <i class="fa fa-fast-forward" aria-hidden="true"></i> Create
                    </h3>
                    <p>In this context you have already a project somewhere, someone already did a <em>~/sf init</em>
                    </p>
                    <p>Then it most likely that you did</p>
                    <div class="highlight">
                        <button class="to-clipboard">
                            <i class="fa fa-clipboard" aria-hidden="true"></i> Copy
                        </button>
                        <pre>$ <code>git clone https://SOMETHING.git</code></pre>
                    </div>


                    <p>
                        If you want to know if your project is Symfony Launchpad ready, you can just check the existance of
                        <em>.sflaunchpad.yml</em> at the root directory of your project.
                    </p>
                    <p>To create the local stack the command is then</p>
                    <div class="highlight">
                        <button class="to-clipboard">
                            <i class="fa fa-clipboard" aria-hidden="true"></i> Copy
                        </button>
                        <pre>$ <code>~/sf create</code></pre>
                    </div>

                    <p>Here Symfony Launchpad will pull the images, create the containers of your stack as well as importing the database/storage.</p>
                </div>
            </div>
        </div>

        <h2 id="deploy"><i class="fa fa-th-list" aria-hidden="true"></i> Deployment</h2>
        <div>
            <p>
                Symfony Launchpad can help you to deploy as well to <b>Kubernetes</b>.
                Even if it is optional and you can deploy the way you want we wanted to provide simplifications.
            </p>
            <div>
                <h3>Setup</h3>
                <p>
                    Kubernetes deployment is done via <a href="https://helm.sh/" target="_blank">Helm</a>. All chart files are configurable in kubernetes/dev/helm directory.
                </p>
                <p>
                    This is a basic Kubernetes cluster configuration needed for each Symfony Lauchpad installation:
                </p>
                <pre>$ cat .sflaunchpad.yml
                <code>
kubernetes:
    kubeconfig: (path to kubeconfig file)
    registry:
        name: (image registry URL where built images are pushed)
        username: (registry login)
        password: (registry password)
    namespace: (cluster namespace where application should be deployed to)</code></pre>

                <h3>Deploy</h3>
                <p>
                    Once your local configuration is done, you can build image. Push to the registry and deploy using your previously configured <b>Helm Chart</b>.
                </p>
                <div class="highlight">
                    <button class="to-clipboard">
                        <i class="fa fa-clipboard" aria-hidden="true"></i> Copy
                    </button>
                    <pre><code>~/sf k8s:build symfony
~/sf k8s:push symfony
~/sf k8s:deploy</code></pre>
                </div>
            </div>
        </div>

        <h2 id="stack"><i class="fa fa-th-list" aria-hidden="true"></i> Stack</h2>
        <div>
            <p>At any time you can get information on your stack by running</p>
            <div class="highlight">
                <button class="to-clipboard">
                    <i class="fa fa-clipboard" aria-hidden="true"></i> Copy
                </button>
                <pre>$ <code>~/sf info</code></pre>
            </div>

            <p>Depending on the initialization, you might have more or less services, but here is the most common stack.</p>

            <h4>LEMP: Linux Nginx MySQL/MariaDB PHP-FPM</h4>
            <img alt="LEMP stack: Linux + Nginx + MySQL/MariaDB + PHP-FPM" src="images/puml/architecture.png" class="img-responsive" />
        </div>

        <h2 id="commands"><i class="fa fa-terminal" aria-hidden="true"></i> Common Commands</h2>
        <div>
            <p>Symfony Launchpad was made to help you with a local Docker stack.</p>
            <p>To do so, here are the commands available to you:</p>
            <div class="highlight">
            <pre>$ ~/sf
                <code>
Usage:
  command [options] [arguments]

Available commands:
  help               Displays help for a command
  list               Lists commands
  self-update        Self Update
 docker
  docker:build       [build] Build all the services (or just one).
  docker:clean       [docker:down|clean|down] Clean all the services.
  docker:comprun     [comprun] Run Composer command in the symfony container.
  docker:create      [create] Create all the services.
  docker:dumpdata    [dumpdata] Dump Database and Storage.
  docker:enter       [enter|docker:exec|exec] Enter in a container.
  docker:importdata  [importdata] Import Database and Storage.
  docker:initialize  [docker:init|initialize|init] Initialize the project and all the services.
  docker:logs        [logs|log] Display the logs.
  docker:sfrun       [sfrun] Run a Symfony command in the symfony container.
  docker:start       [start] Start all the services (or just one).
  docker:status      [docker:ps|docker:info|ps|info] Obtaining the project information.
  docker:stop        [stop] Stop all the services (or just one).
  docker:up          [up] Up all the services (or just one).
  docker:update      Update to last images.
 k8s
  k8s:build          Build new image for a given container.
  k8s:deploy         [deploy] Deploy application to Kubernetes using Helm Chart.
  k8s:enter          Enter in a container.
  k8s:push           [push] Push new image of a given container to the registry.
  k8s:tunnel         [tunnel] Forward port to/from selected pod.</code></pre>
            </div>

            <div>
                <p>When you want to provide extra arguments to a Symfony command, you have to wrap everything (command + arguments) inside quotes:</p>
                <pre>$ ~/sf sfrun "cache:clear --env=prod"</pre>
            </div>

        </div>
        <h2 id="home"><i class="fa fa-home" aria-hidden="true"></i> Global configuration</h2>
        <div>
            <p>
                Because every project can share stuff and because you might want the same configuration everywhere, Symfony Launchpad reads a configuration file in your HOME directory as well as project directory.
            </p>
            <p>
                This configuration file loading hierarchy is the following (next configuration file is overriding values from a previous one):
            </p>
            <ol>
                <li><em>~/.sflaunchpad/sf.yml</em> - home directory</li>
                <li><em>.sflaunchpad.yml</em> - project directory</li>
                <li><em>.sflaunchpad.local.yml</em> - project directory (shouldn't be stored in CVS repository)</li>
            </ol>
            <div class="highlight">
                <button class="to-clipboard">
                    <i class="fa fa-clipboard" aria-hidden="true"></i> Copy
                </button>
                <pre><code>provisioning:
    folder_name: docker
    project_folder_name: symfony
docker:
    compose_filename: docker-compose.yml
    network_name: default-sflaunchpad
    network_prefix_port: 0
    host_machine_mapping: ~
    host_composer_cache_dir: ~
    storage_dirs:
        public_storage: symfony/public/storage
    variables:
        RUNNING_ENV: docker
        CUSTOM_DOCKER_ENV: 1
    context: ~
    main_container: symfony
composer:
    http_basic:
        hostname:
            host: www.hostname.com
            login: login
            password: pass
    token:
        github:
            host: github.com
            value: tokenvalue
kubernetes:
    folder_name: kubernetes
    kubeconfig: /Users/ubuntu/kubeconfig.yml
    namespace: symfony
    registry:
        name: example.com/myregistry/symfony
        username: user-token
        password: user-token-pass</code></pre>
            </div>
            <p>
                Note that this configuration is global and won't be included in the project (i.e. in the CVS repository). But it will be including in your local stack.
            </p>
            <p><em><b>docker</b></em> section is described in the next section.</p>
        </div>

        <h2 id="mac-tips"><i class="fa fa-apple" aria-hidden="true"></i> macOS - Tips</h2>
        <div>
            <p>

                When it comes to share a folder from the Host (your Mac) to containers, <em>Docker for Mac</em> is slow (at least for now).
                There is a good improvement with new virtualization framework and VirtioFS, but not in all cases. Intel's versions of MacBooks
                seem to be left behind in terms of file access performance, but there's built-in solution for Docker - <em>Mutagen</em>.<br/>
                It can be easily installed as a Docker Extension - <a href="https://mutagen.io/documentation/docker-desktop-extension" target="_blank">you can read more here</a>.
            </p>
            <p>
                After installing and configuring Mutagen extension all you need to do is add default docker context to be used within your stack.
            </p>

            <div class="highlight">
                <button class="to-clipboard">
                    <i class="fa fa-clipboard" aria-hidden="true"></i> Copy
                </button>
                <pre># .sflaunchpad.local.yml<code>
docker:
    context: desktop-linux-mutagen</code></pre>
            </div>


            <h3>Store cache in the container</h3>
            <p>
                If you need even better performance, it can be optimized. The following is clearly a trick. But a trick that works pretty well!<br /> Here is the magic, in your <b>.sflauchpad.local.yml</b> you have this line:
            </p>

            <div class="highlight">
                <button class="to-clipboard">
                    <i class="fa fa-clipboard" aria-hidden="true"></i> Copy
                </button>
                <pre># .sflaunchpad.local.yml<code>
docker:
    variables:
        APP_CACHE_DIR: /tmp/symfonycache/
        APP_LOG_DIR: /tmp/symfonylog/</code></pre>
            </div>
        </div>

        <p>Enjoy!</p>
    </div>

    <footer>
        <div class="copyright-content">
            <div class="container">
                <div class="row">
                    <div class="col-md-12 text-center">
                        <p>Copyright © 2023. All rights reserved.</p>
                    </div>
                </div>
            </div>
        </div>
    </footer>
</main>
<script src="js/clipboard.min.js"></script>
<script src="js/sflaunchpad.js"></script>
</body>
</html>
